[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE.md) 
[![CLA](https://img.shields.io/badge/CLA%3F-Required-blue.svg)](https://Sabik.ai/cla) 
[![Team](https://img.shields.io/badge/Team-Sabik_Core-violetblue.svg)](https://github.com/SabikAI/contributors/blob/master/team/Sabik%20Core.md) 
![Status](https://img.shields.io/badge/-Production_ready-green.svg)

![Unit Tests](https://github.com/Sabikai/Sabik-core/workflows/Unit%20Tests/badge.svg)
[![codecov](https://codecov.io/gh/SabikAI/Sabik-core/branch/dev/graph/badge.svg?token=zQzRlkXxAr)](https://codecov.io/gh/SabikAI/Sabik-core)
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](http://makeapullrequest.com)
[![Join chat](https://img.shields.io/badge/Mattermost-join_chat-brightgreen.svg)](https://chat.Sabik.ai)

# Sabik

Sabik is a hackable open source voice assistant.

## Table of Contents

- [Getting Started](#getting-started)
- [Running Sabik](#running-Sabik)
- [Using Sabik](#using-Sabik)
  * [*Home* Device and Account Manager](#home-device-and-account-manager)
  * [Skills](#skills)
- [Behind the scenes](#behind-the-scenes)
  * [Pairing Information](#pairing-information)
  * [Configuration](#configuration)
  * [Using Sabik Without Home](#using-Sabik-without-home)
  * [API Key Services](#api-key-services)
  * [Using Sabik behind a proxy](#using-Sabik-behind-a-proxy)
    + [Using Sabik behind a proxy without authentication](#using-Sabik-behind-a-proxy-without-authentication)
    + [Using Sabik behind an authenticated proxy](#using-Sabik-behind-an-authenticated-proxy)
- [Getting Involved](#getting-involved)
- [Links](#links)

## Getting Started

First, get the code on your system!  The simplest method is via git ([git installation instructions](https://gist.github.com/derhuerst/1b15ff4652a867391f03)):
- `cd ~/`
- `git clone https://github.com/SabikAI/Sabik-core.git`
- `cd Sabik-core`
- `bash dev_setup.sh`


This script sets up dependencies and a [virtualenv][about-virtualenv].  If running in an environment besides Ubuntu/Debian, Arch or Fedora you may need to manually install packages as instructed by dev_setup.sh.

[about-virtualenv]:https://virtualenv.pypa.io/en/stable/

NOTE: The default branch for this repository is 'dev', which should be considered a work-in-progress. If you want to clone a more stable version, switch over to the 'master' branch.

## Running Sabik

Sabik provides `start-Sabik.sh` to perform common tasks. This script uses a virtualenv created by `dev_setup.sh`.  Assuming you installed Sabik-core in your home directory run:
- `cd ~/Sabik-core`
- `./start-Sabik.sh debug`

The "debug" command will start the background services (microphone listener, skill, messagebus, and audio subsystems) as well as bringing up a text-based Command Line Interface (CLI) you can use to interact with Sabik and see the contents of the various logs. Alternatively you can run `./start-Sabik.sh all` to begin the services without the command line interface.  Later you can bring up the CLI using `./start-Sabik.sh cli`.

The background services can be stopped as a group with:
- `./stop-Sabik.sh`

## Using Sabik

### *Home* Device and Account Manager
Sabik AI, Inc. maintains a device and account management system known as Sabik Home. Developers may sign up at: https://home.Sabik.ai

By default, Sabik-core  is configured to use Home. By saying "Hey Sabik, pair my device" (or any other request verbal request) you will be informed that your device needs to be paired. Sabik will speak a 6-digit code which you can enter into the pairing page within the [Sabik Home site](https://home.Sabik.ai).

Once paired, your unit will use Sabik API keys for services such as Speech-to-Text (STT), weather and various other skills.

### Skills

Sabik is nothing without skills.  There are a handful of default skills that are downloaded automatically to your `/opt/Sabik/skills` directory, but most need to be installed explicitly.  See the [Skill Repo](https://github.com/SabikAI/Sabik-skills#welcome) to discover skills made by others.  Please share your own interesting work!

## Behind the scenes

### Pairing Information
Pairing information generated by registering with Home is stored in:
`~/.config/Sabik/identity/identity2.json` <b><-- DO NOT SHARE THIS WITH OTHERS!</b>

### Configuration
Sabik's configuration consists of 4 possible locations:
- `Sabik-core/Sabik/configuration/Sabik.conf`(Defaults)
- [Sabik Home](https://home.Sabik.ai) (Remote)
- `/etc/Sabik/Sabik.conf` (Machine)
- `$XDG_CONFIG_DIR/Sabik/Sabik.conf` (which is by default `$HOME/.config/Sabik/Sabik.conf`) (USER)

When the configuration loader starts, it looks in these locations in this order, and loads ALL configurations. Keys that exist in multiple configuration files will be overridden by the last file to contain the value. This process results in a minimal amount being written for a specific device and user, without modifying default distribution files.

### Using Sabik Without Home

If you do not wish to use the Sabik Home service, before starting Sabik for the first time, create `$HOME/.config/Sabik/Sabik.conf` with the following contents:

```
{
  "skills": {
    "blacklisted_skills": [
      "Sabik-configuration.Sabikai",
      "Sabik-pairing.Sabikai"
    ]
  }
}
```

### API Key Services

The Sabik backend provides access to a range of API keys for specific services. Without pairing with the Sabik backend, you will need to add your own API keys, install a different Skill or Plugin to perform that function, or not have access to that functionality.

These are the keys currently used in Sabik Core through the Sabik backend:

- [STT API, Google STT, Google Cloud Speech](http://www.chromium.org/developers/how-tos/api-keys)
  - [A range of STT services](https://Sabik-ai.gitbook.io/docs/using-Sabik-ai/customizations/stt-engine) are available for use with Sabik.
- [Weather Skill API, OpenWeatherMap](http://openweathermap.org/api)
- [Wolfram-Alpha Skill](http://products.wolframalpha.com/api/)


### Using Sabik behind a proxy

Many schools, universities and workplaces run a `proxy` on their network. If you need to type in a username and password to access the external internet, then you are likely behind a `proxy`.

If you plan to use Sabik behind a proxy, then you will need to do an additional configuration step.

_NOTE: In order to complete this step, you will need to know the `hostname` and `port` for the proxy server. Your network administrator will be able to provide these details. Your network administrator may want information on what type of traffic Sabik will be using. We use `https` traffic on port `443`, primarily for accessing ReST-based APIs._

#### Using Sabik behind a proxy without authentication

If you are using Sabik behind a proxy without authentication, add the following environment variables, changing the `proxy_hostname.com` and `proxy_port` for the values for your network. These commands are executed from the Linux command line interface (CLI).

```bash
$ export http_proxy=http://proxy_hostname.com:proxy_port
$ export https_port=http://proxy_hostname.com:proxy_port
$ export no_proxy="localhost,127.0.0.1,localaddress,.localdomain.com,0.0.0.0,::1"
```

#### Using Sabik behind an authenticated proxy

If  you are behind a proxy which requires authentication, add the following environment variables, changing the `proxy_hostname.com` and `proxy_port` for the values for your network. These commands are executed from the Linux command line interface (CLI).

```bash
$ export http_proxy=http://user:password@proxy_hostname.com:proxy_port
$ export https_port=http://user:password@proxy_hostname.com:proxy_port
$ export no_proxy="localhost,127.0.0.1,localaddress,.localdomain.com,0.0.0.0,::1"
```

## Getting Involved

This is an open source project. We would love your help. We have prepared a [contributing](.github/CONTRIBUTING.md) guide to help you get started.

If this is your first PR, or you're not sure where to get started,
say hi in [Sabik Chat](https://chat.Sabik.ai/) and a team member would be happy to mentor you.
Join the [Sabik Forum](https://community.Sabik.ai/) for questions and answers.

## Links
* [Creating a Skill](https://Sabik-ai.gitbook.io/docs/skill-development/your-first-skill)
* [Documentation](https://docs.Sabik.ai)
* [Skill Writer API Docs](https://Sabik-core.readthedocs.io/en/master/)
* [Release Notes](https://github.com/SabikAI/Sabik-core/releases)
* [Sabik Chat](https://chat.Sabik.ai)
* [Sabik Forum](https://community.Sabik.ai)
* [Sabik Blog](https://Sabik.ai/blog)


